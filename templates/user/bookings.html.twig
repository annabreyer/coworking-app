{% extends 'base.html.twig' %}
{% block title %}{% trans %}My bookings {% endtrans %}{% endblock %}

{% block body %}
    <h1>{% trans %}My bookings {% endtrans %}</h1>


    {% for message in app.flashes('success') %}
        <div class="alert alert-success" role="alert">{{ message|trans }}</div>
    {% endfor %}

    {% for error in app.flashes('error') %}
        <div class="alert alert-danger" role="alert">{{ error }}</div>
    {% endfor %}

    <div class="mb-3">
        <a href="{{ path('booking_step_date') }}" class="btn btn-primary">New booking</a>
    </div>

    {% for booking in user.bookings %}
        <div>
        {{ booking.businessDay.date|date('Y-m-d') }}
        {{ booking.room.name }}
        {% if booking.businessDay.date > limit %}
            <form action="{{ path('booking_cancel', {'uuid': booking.uuid })}}" method="post">
                <input type="hidden" name="bookingId" value="{{ booking.id }}">

                <button type="submit">Cancel</button>
            </form>
        {% endif %}

        {% if booking.invoice %}
            <a href="{{ path('invoice_download', {'uuid': booking.invoice.uuid }) }}" target="_blank">Invoice</a>
        {% endif %}
        </div>
    {% endfor %}
{% endblock %}